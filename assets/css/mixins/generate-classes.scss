/// Replace `$search` with `$replace` in `$string`
/// @author Hugo Giraudel
/// @param {String} $string - Initial string
/// @param {String} $search - Substring to replace
/// @param {String} $replace ('') - New value
/// @return {String} - Updated string
@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);

  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }

  @return $string;
}

// Variables
$spacing-unit: 4px;
$spacing-max: 1000;

@mixin generate($property, $direction) {
  @for $i from 0 through $spacing-max {
    $res_replaced: str-replace(inspect($i/2), '.', '\\.');

    .#{$property}-#{$res_replaced} {
      #{$direction}: $spacing-unit * ($i/2) !important;
    }
  }
}

@mixin multigenerate($property, $direction1, $direction2) {
  @for $i from 0 through $spacing-max {
    $res_replaced: str-replace(inspect($i/2), '.', '\\.');

    .#{$property}-#{$res_replaced} {
      #{$direction1}: $spacing-unit * ($i/2) !important;
      #{$direction2}: $spacing-unit * ($i/2) !important;
    }
  }
}

// Padding classes
@include generate('pa', 'padding');
@include generate('pt', 'padding-top');
@include generate('pb', 'padding-bottom');
@include generate('pl', 'padding-left');
@include generate('pr', 'padding-right');
@include multigenerate('px', 'padding-left', 'padding-right');
@include multigenerate('py', 'padding-top', 'padding-bottom');

// Margin classes
@include generate('ma', 'margin');
@include generate('mt', 'margin-top');
@include generate('mb', 'margin-bottom');
@include generate('ml', 'margin-left');
@include generate('mr', 'margin-right');
@include multigenerate('mx', 'margin-left', 'margin-right');
@include multigenerate('my', 'margin-top', 'margin-bottom');

// Gap classes
@include generate('gap', 'gap');

// Border radius classes
@include generate('br', 'border-radius');

// Dimension classes
@include generate('w', 'width');
@include generate('h', 'height');
@include multigenerate('wh', 'width', 'height');